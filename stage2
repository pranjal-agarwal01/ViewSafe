ğŸŸ¦ Stage 2 â€” Baseline, Relative Distance & Zones

Goal of Stage 2
Convert a noisy pixel width signal into:

a stable baseline

a smoothed relative distance

Safe / Close / Danger zones
â†’ without calibration, without user input.

1ï¸âƒ£ Baseline Capture (first 10â€“20 seconds)
What â€œbaselineâ€ means

Baseline = userâ€™s natural face width in pixels when sitting normally.

This replaces:

real face width âŒ

focal length âŒ

absolute distance âŒ

Baseline capture rules (important)

During startup window (10â€“20 sec):

Only accept frames when:

face_detected == True

tracking_stable == True

no hard jump rejected

Collect width_px values

Ignore outliers automatically (jump logic already exists)

How baseline is finalized

Use median (not mean) of collected widths
â†’ median is robust to small movements

Once baseline is locked:

Never overwrite it in the same session

ğŸ“Œ This mirrors how posture & eye-tracking systems initialize.

2ï¸âƒ£ Relative Distance Ratio (core metric)

This is the heart of ViewSafe.

Formula
ratio = baseline_width / current_width


Interpretation:

ratio â‰ˆ 1.0 â†’ same distance as baseline

ratio > 1.0 â†’ user moved closer

ratio < 1.0 â†’ user moved farther away

No centimeters.
No camera calibration.
Pure geometry.

3ï¸âƒ£ EMA Smoothing (mandatory)

Raw ratios fluctuate due to:

blinking

micro head motion

webcam noise

So we smooth.

EMA logic
smoothed = Î± * current + (1 - Î±) * previous


Recommended:

Î± = 0.2 (good balance for human motion)

Rules:

Do NOT update EMA when:

tracking unstable

frame rejected

Hold last valid smoothed value

ğŸ“Œ This prevents flicker and false zone switching.

4ï¸âƒ£ Zone Classification (locked from Stage 0)

Using smoothed ratio:

Zone	Condition
ğŸŸ¢ Safe	0.90 â‰¤ ratio â‰¤ 1.10
ğŸŸ¡ Close	1.10 < ratio â‰¤ 1.30
ğŸ”´ Danger	ratio > 1.30

No overlap.
Deterministic.
Easy to reason about.

5ï¸âƒ£ Time-based Validation (very important)

We never alert instantly.

Per-zone timers

Start timer when entering a zone

Reset when leaving the zone

Danger trigger rules

Trigger danger only if:

Continuous danger â‰¥ 5â€“7 seconds
OR

Cumulative danger â‰¥ 30 sec in 5 min

Why:

Users lean briefly all the time

We care about sustained strain

This makes ViewSafe feel smart, not annoying.

6ï¸âƒ£ Overlay behavior (top-right only)

Stage 2 overlay logic:

While baseline is learning
ViewSafe
Calibrating postureâ€¦

After baseline lock
ğŸŸ¢ ViewSafe â€” Safe
ğŸŸ¡ ViewSafe â€” Too Close
ğŸ”´ ViewSafe â€” Move Back


Rules:

No numbers shown to user

Color + short text only

Overlay updates only on zone change (not every frame)

7ï¸âƒ£ Failure handling (must-have)
If face lost

Pause timers

Freeze ratio

Overlay:

ViewSafe
Face not detected

If tracking unstable

No zone change

No alerts

Do not corrupt baseline

8ï¸âƒ£ Internal state machine (conceptual)

You now have these states:

INIT â†’ collecting baseline

ACTIVE_SAFE

ACTIVE_CLOSE

ACTIVE_DANGER

PAUSED_NO_FACE

This makes Stage 3 (alerts + analytics) trivial.

9ï¸âƒ£ Stage 2 â€œDoneâ€ checklist âœ…

Stage 2 is complete when:

Baseline locks once per session

Ratio is stable (no flicker)

Zones donâ€™t oscillate

Short lean-ins donâ€™t trigger alerts

Overlay feels calm and trustworthy

ğŸ”‘ Why this design is strong (founder lens)

No calibration = frictionless adoption

Relative model = robust across devices

Time-based logic = human-friendly

Offline = trust + privacy

This is exactly how youâ€™d defend it in:

a demo

a pitch

a patent

an interview